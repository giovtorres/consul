{
  "versionInfo": "00000001",
  "resources": [
    {
      "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
      "name": "cache.default.dc1.internal.11111111-2222-3333-4444-555555555555.consul",
      "type": "LOGICAL_DNS",
      "connectTimeout": "5s",
      "loadAssignment": {
        "clusterName": "cache.default.dc1.internal.11111111-2222-3333-4444-555555555555.consul",
        "endpoints": [
          {
            "lbEndpoints": [
              {
                "endpoint": {
                  "address": {
                    "socketAddress": {
                      "address": "cache.mydomain",
                      "portValue": 8081
                    }
                  }
                },
                "healthStatus": "HEALTHY",
                "loadBalancingWeight": 1
              }
            ]
          }
        ]
      },
      "dnsRefreshRate": "10s",
      "dnsLookupFamily": "V4_ONLY",
      "outlierDetection": {

      }
    },
    {
      "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
      "name": "consul-ecs-lambda-test",
      "type": "LOGICAL_DNS",
      "connectTimeout": "0.500s",
      "loadAssignment": {
        "clusterName": "consul-ecs-lambda-test",
        "endpoints": [
          {
            "lbEndpoints": [
              {
                "endpoint": {
                  "address": {
                    "socketAddress": {
                      "address": "lambda.us-east-2.amazonaws.com",
                      "portValue": 443
                    }
                  }
                }
              }
            ]
          }
        ]
      },
      "dnsLookupFamily": "V4_ONLY",
      "transportSocket": {
        "name": "envoy.transport_sockets.tls",
        "typedConfig": {
          "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
          "sni": "*.amazonaws.com"
        }
      },
      "metadata": {
        "filterMetadata": {
          "com.amazonaws.lambda": {
              "egress_gateway": true
            }
        }
      }
    },
    {
      "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
      "name": "db.default.dc1.internal.11111111-2222-3333-4444-555555555555.consul",
      "type": "LOGICAL_DNS",
      "connectTimeout": "5s",
      "loadAssignment": {
        "clusterName": "db.default.dc1.internal.11111111-2222-3333-4444-555555555555.consul",
        "endpoints": [
          {
            "lbEndpoints": [
              {
                "endpoint": {
                  "address": {
                    "socketAddress": {
                      "address": "db.mydomain",
                      "portValue": 8081
                    }
                  }
                },
                "healthStatus": "UNHEALTHY",
                "loadBalancingWeight": 1
              }
            ]
          }
        ]
      },
      "dnsRefreshRate": "10s",
      "dnsLookupFamily": "V4_ONLY",
      "outlierDetection": {

      }
    },
    {
      "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
      "name": "web.default.dc1.internal.11111111-2222-3333-4444-555555555555.consul",
      "type": "EDS",
      "edsClusterConfig": {
        "edsConfig": {
          "ads": {

          },
          "resourceApiVersion": "V3"
        }
      },
      "connectTimeout": "5s",
      "outlierDetection": {

      },
      "transportSocket": {
        "name": "tls",
        "typedConfig": {
          "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
          "commonTlsContext": {
            "tlsParams": {

            },
            "validationContext": {
              "trustedCa": {
                "filename": "ca.cert.pem"
              }
            }
          }
        }
      }
    }
  ],
  "typeUrl": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
  "nonce": "00000001"
}